#ifndef moweractionClass_h
#define moweractionClass_h
#include "globals.h"

/* Set a new target speed and how long time it should take to reach it. */

void mowerCommand2(int LSpeed,int RSpeed,int t){
    int i = t / SchedTicks;
    if (i<=0) i=1;

    leftWheel.setTargetSpeed(LSpeed,i);
    rightWheel.setTargetSpeed(RSpeed,i);
    SetDuration(i);
};

void StartCutting2(int t){
    if (t<=0) { t=1; }; 
    mowerState = CUTTING_STATE;
    seqNumber = 0;
    mowerCommand2(Speed90,Speed90,t);
};

class mowerPath {
   // private:
    
    public:
    virtual void movePath() = 0;
    mowerPath() {};
};
//mowerPath::mowerPath() {};

class straightCutting: mowerPath {
    public:
    void movePath() {    
        switch(seqNumber) {
            case 0  :
                mowerCommand2(MaxSpeed,MaxSpeed,2000);
                break;
            case 1 :
                SetDuration(TASK_FOREVER); 
                break;
            default :
                ;  // Set mowerState to Cutting 
        };
        seqNumber++;
    };
};
/*
  void HandleCollision() {
    switch(seqNumber) {
        case 0  :  // Backout within 100 msec
            mowerCommand2 (-Speed30,-Speed30,100 );
            break;
        case 1 :  // Keep backing out and turn. 
            mowerCommand2 (-Speed30,-Speed10,1500); 
            break;
        case 2 : // Keep backing out and turn.
            mowerCommand2 (Speed10,Speed40,1400); // Turn!
            break;
        case 3 :
            mowerCommand2 (Speed50,Speed50,2000); // go out from collision
            break;
        default :
            StartCutting2(1500);  // Set mowerState to Cutting 
    };
    seqNumber++; // Advance to next phase
  };
  
  void BWFBackout () {
    switch(seqNumber) {
        case 0 :  //Backoutstraight
            mowerCommand2(-Speed30,-Speed30,100);
            break;
        case 1 : //Backout with turn
            mowerCommand2(-Speed30,Speed30,2000); 
            break;
        case 2 : // Let it turn.
            SetDuration(2000); 
            break;
        case 3 : // go out from collision
            mowerCommand2(Speed50,Speed50,1500); 
            break;
        default : 
            StartCutting2(2000);  // Set mowerState to Cutting 
    };
    seqNumber++; // Advance to next phase
  };

  void BWFTurn() {
    Side BWFSide; // Remember where the wire is.
  
    switch(seqNumber) {
        case 0 :
            BWFSide = GetWireSide();
            break;
        case 1 :
            if (BWFSide == Right) { 
                mowerCommand2(Speed20,Speed80,1500 ); // Turn!    
            } else {
                mowerCommand2(Speed80,Speed20,1500 ); // Turn!    
            }
            break;
        default : 
            StartCutting2(1000);  // Set mowerState to Cutting 
    };
    seqNumber++; // Advance to next phase
  };
  
  void FindBWF(){
    //stopCutterDisc();
    switch (seqNumber) {
        case 0: 
            mowerCommand2(Speed50,Speed50,1000);
            break;
        case 1:
            ;
        default:
            SetDuration(TASK_FOREVER);
    };
    seqNumber++;
  };


  void Circle(){
    //stopCutterDisc();
    switch (seqNumber) {
        case 0:
            mowerCommand2(Speed00,Speed00,800);
            break;
        case 1:
            mowerCommand2(-Speed70,-Speed50,800);
            break;
        case 2:
            mowerCommand2(Speed90,MaxSpeed,15000);
            break;
        case 3:
            mowerCommand2(-Speed70,-Speed50,1400);
            break;
        default:
            SetDuration(TASK_FOREVER);
    };
    seqNumber++;
  };
*/
#endif
